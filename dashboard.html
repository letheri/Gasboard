<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/vendor/favicon.png" />
    <link rel="apple-touch-icon" href="/vendor/favicon.png" />
    <title id="appTitle">Dashboard</title>
    <!-- Bootstrap v5.2.3 -->
    <link rel="stylesheet" href="/css/libs/bootstrap.min.css" />
    <script
      type="text/javascript"
      src="/js/libs/bootstrap.bundle.min.js"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
    />
    <!-- Chart JS v4.0.1 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Styling -->
    <!-- <link rel="stylesheet" href="/css/app.css" />
    <link rel="stylesheet" href="/css/login.css" /> -->
    <!-- JavaScript -->
    <!-- <script type="text/javascript" src="/js/app.js" defer></script>
    <script type="text/javascript" src="/js/login.js" defer></script> -->
  </head>

  <body class="bg-light">
    <div class="container">
      <div class="row" id="firstRow">
        <div
          class="col-2 text-center d-flex flex-column justify-content-center"
        >
          <span>Tüketim</span>
        </div>
        <div class="col-md-1"><div class="vr h-100"></div></div>

        <div class="col-9">
          <div class="row">
            <div class="col-6">
              <div class="card">
                <div class="card-body">
                  <img src="/images/icons/fire.svg" class="icon float-end" />
                  <h6 class="text-uppercase mt-0">Toplam Tüketim</h6>
                  <h2 class="my-2" id="active-users-count">121</h2>
                  <p class="mb-0 text-muted">
                    <span class="text-success me-2"
                      ><span class="bi bi-caret-up-fill text-success"></span>
                      5.27%</span
                    ><span class="text-nowrap text-secondary"
                      >Geçen aya kıyasla
                    </span>
                  </p>
                </div>
              </div>
            </div>
            <!-- col end -->
            <div class="col-6">
              <div class="card">
                <div class="card-body">
                  <canvas id="canvas" class="float-end"></canvas>
                  <h6 class="text-uppercase mt-0">Toplam Tüketim</h6>
                  <h2 class="my-2" id="active-users-count">121</h2>
                  <p class="mb-0 text-muted">
                    <span class="text-success me-2"
                      ><span class="bi bi-caret-up-fill text-success"></span>
                      5.27%</span
                    ><span class="text-nowrap text-secondary"
                      >Geçen aya kıyasla
                    </span>
                  </p>
                </div>
              </div>
            </div>
            <!-- col end -->
          </div>
        </div>
        <!-- row end -->
        <div class="row">
          <div class="col"></div>
        </div>
      </div>
      <div class="row" id="secondRow">
        <div class="col-2">Hatlar</div>
      </div>
    </div>
  </body>
  <style>
    * {
      /* border: 1px solid rgba(70, 247, 1, 0.322); */
    }
    .icon {
      height: 40px;
    }
  </style>
  <script>
    const colors = {
      purple: {
        default: "rgba(149, 76, 233, 1)",
        half: "rgba(149, 76, 233, 0.5)",
        quarter: "rgba(149, 76, 233, 0.25)",
        zero: "rgba(149, 76, 233, 0)",
      },
      indigo: {
        default: "rgba(80, 102, 120, 1)",
        quarter: "rgba(80, 102, 120, 0.25)",
      },
    };

    const weight = [60.0, 60.2, 59.1, 61.4, 59.9, 60.2, 59.8, 58.6, 59.6, 59.2];
    const dataBounds = chartMaxMin(weight);
    const labels = [
      "Week 1",
      "Week 2",
      "Week 3",
      "Week 4",
      "Week 5",
      "Week 6",
      "Week 7",
      "Week 8",
      "Week 9",
      "Week 10",
    ];

    const labels2 = ["", "", "", "", "", "", "", "", "", ""];

    const ctx = document.getElementById("canvas").getContext("2d");
    // ctx.canvas.height = 100;

    gradient = ctx.createLinearGradient(0, 25, 0, 300);
    gradient.addColorStop(0, colors.purple.half);
    gradient.addColorStop(0.35, colors.purple.quarter);
    gradient.addColorStop(1, colors.purple.zero);

    const options = {
      type: "line",
      data: {
        labels: labels,
        datasets: [
          {
            fill: true,
            backgroundColor: gradient,
            pointBackgroundColor: colors.purple.default,
            borderColor: colors.purple.default,
            data: weight,
            // lineTension: 0.2,
            borderWidth: 2,
            // pointRadius: 3,
          },
        ],
      },
      options: {
        layout: {
          padding: 10,
        },
        responsive: true,
        legend: {
          display: false,
        },
        scales: {
          x: {
            grid: {
              display: false,
            },
          },
          y: {
            grid: {
              display: true,
              color: colors.indigo.quarter,
            },
            ticks: {
              beginAtZero: false,
              padding: 10,
            },
            max: dataBounds.upper,
            min: dataBounds.lower,
          },
        },
      },
    };

    window.onload = function () {
      window.myLine = new Chart(ctx, options);
    };

    function chartMaxMin(chartDataArray) {
      const maxVal = Math.max(...chartDataArray);
      const minVal = Math.min(...chartDataArray);
      const delta = maxVal - minVal
      const upperBound =
        Math.trunc(delta / 10 + maxVal) + 1;
      const lowerBound =
        Math.trunc(minVal - delta / 10 ) - 1 ;
      return { lower: lowerBound, upper: upperBound };
    }
  </script>
</html>
